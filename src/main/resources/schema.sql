DROP TABLE Ingredient IF EXISTS;
DROP TABLE Ingredient_Ref IF EXISTS;
DROP TABLE Buter IF EXISTS;
DROP TABLE Buter_Order IF EXISTS;
DROP TABLE Buter_User IF EXISTS;
CREATE TABLE Ingredient (
    id VARCHAR(4) NOT NULL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    type VARCHAR(31) NOT NULL
);
CREATE TABLE Ingredient_Ref (
    ingredient_id VARCHAR(4) NOT NULL,
    buter BIGINT NOT NULL,
    buter_key BIGINT NOT NULL
);
CREATE TABLE Buter (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMP NOT NULL,
    name VARCHAR(255) NOT NULL,
    buter_order BIGINT NOT NULL,
    buter_order_key BIGINT NOT NULL
);
CREATE TABLE Buter_Order (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMP NOT NULL,
    username VARCHAR(255) NOT NULL,
    recipient VARCHAR(255) NOT NULL,
    delivery_address VARCHAR(255) NOT NULL,
    card_number VARCHAR(255) NOT NULL,
    card_expiration VARCHAR(255) NOT NULL,
    card_cvv VARCHAR(255) NOT NULL
);
CREATE TABLE Buter_User (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    username VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL,
    phone_number VARCHAR(255) NOT NULL
);
ALTER TABLE Buter ADD FOREIGN KEY (buter_order) REFERENCES Buter_Order(id);
ALTER TABLE Ingredient_Ref ADD FOREIGN KEY (ingredient_id) REFERENCES Ingredient(id);
